#!/usr/bin/env bash

PATH=$PWD/fixtures/config-default:${PATH}
output=$(mktemp)
globalConfig=$(mktemp)

trap "rm -r -- '${output}' '${globalConfig}'" EXIT

before-each() {
  export BASHCLI_CONFIG_GLOBAL=${globalConfig}
  
  cat > "${globalConfig}" <<EOF
global-property=global-value
EOF
}

test-config-get-global-value() {
  cli cli config get global-property &> "${output}"
  diff "${output}" - <<<global-value
}

test-config-get-default-value() {
  cli cli config get default-property &> "${output}"
  diff "${output}" - <<<default-value
}

test-config-get-default-profile-value() {
  cli cli config get global-property --profile=profile &> "${output}"
  diff "${output}" - <<<default-profile-value
}

. ./lib/run-tests
