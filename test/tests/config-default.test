#!/usr/bin/env bash

PATH=$PWD/fixtures/config-default:${PATH}
output=$(mktemp)
globalConfigDir=$(mktemp -d)
globalConfig=${globalConfigDir}/cli.conf

trap "rm -r -- '${output}' '${globalConfigDir}'" EXIT

before-each() {
  export BASHCLI_CONFIG_GLOBAL_DIR=${globalConfigDir}
  
  cat > "${globalConfig}" <<EOF
global-property=global-value
EOF
}

test-config-get-global-value() {
  cli config get global-property &> "${output}"
  diff "${output}" - <<<global-value
}

test-config-get-default-value() {
  cli config get default-property &> "${output}"
  diff "${output}" - <<<default-value
}

test-config-get-default-profile-value() {
  cli config get global-property --profile=profile &> "${output}"
  diff "${output}" - <<<default-profile-value
}

. ./lib/run-tests
