#!/usr/bin/env bash

set -e

bashFiles=()

while IFS= read -d '' -r filename; do
  head -n1 "${filename}" | \
    grep -Eq '^#!(/usr/bin/env bash|/bin/bash)' && \
    bashFiles+=("${filename}")
done < <(git ls-files -z -- src/commands src/lib test)

shellcheck -f gcc "${bashFiles[@]}"
